# ===================================================================
# Qdrant Vector Database Configuration for Railway Production
# ===================================================================
# Railway will auto-configure networking, but explicit environment
# variables provide enhanced control and observability.

# ===================================================================
# CORE CONFIGURATION
# ===================================================================

# Service Port Configuration
QDRANT__SERVICE__HTTP_PORT=6333
QDRANT__SERVICE__GRPC_PORT=6334

# API Key - STRONGLY RECOMMENDED for production
# Generate with: openssl rand -base64 32
# QDRANT_API_KEY=your_secure_api_key_here

# Storage Path - Default is /qdrant/storage
# Railway volumes handle persistence automatically
# QDRANT__STORAGE__SNAPSHOTS_PATH=/qdrant/snapshots
# QDRANT__STORAGE__STORAGE_PATH=/qdrant/storage

# ===================================================================
# PERFORMANCE TUNING
# ===================================================================

# Memory Configuration
# Qdrant will use available memory, but can be limited
# Recommended: 2GB minimum, 4GB+ for production with large collections
# QDRANT__OPTIMIZERS__MEMMAP_THRESHOLD_MB=268435456

# Indexing Threads
# 0 = auto-detect based on CPU cores (recommended)
# Set explicitly if needed: 4, 8, 16, etc.
# QDRANT__PERFORMANCE__INDEX_THREADS=0

# Cache Configuration for faster searches
# Increase for large working sets (200-500 MB typical)
# QDRANT__PERFORMANCE__VECTOR_CACHE_SIZE_GB=0

# Flush interval - how often to persist data (milliseconds)
# Default: 5000ms (5s). Decrease for more durability, increase for speed
# QDRANT__STORAGE__FLUSH_INTERVAL_MS=5000

# ===================================================================
# SNAPSHOT & BACKUP CONFIGURATION
# ===================================================================

# Enable automatic snapshots for data protection
# QDRANT__SNAPSHOTS__SNAPSHOTS_PATH=/qdrant/snapshots

# Snapshot creation interval (seconds)
# Default: 600s (10 minutes) - adjust based on data importance
# QDRANT__SNAPSHOTS__SNAPSHOT_INTERVAL=600

# Maximum number of snapshots to keep
# Default: 3 - keep more for production safety
# QDRANT__SNAPSHOTS__MAX_SNAPSHOTS_TO_KEEP=5

# ===================================================================
# SECURITY & ACCESS CONTROL
# ===================================================================

# API Key Authentication (recommended for production)
# QDRANT_API_KEY=sk-your-secure-key-here

# Read-Only Mode - for disaster recovery or replicas
# QDRANT__COMMON__READ_ONLY_MODE=false

# ===================================================================
# LOGGING & MONITORING
# ===================================================================

# Log Level: trace, debug, info, warn, error
# Use 'info' for production, 'debug' for troubleshooting
# QDRANT__LOG_LEVEL=info

# Enable request logging
# QDRANT__LOG_LEVEL=debug

# ===================================================================
# REPLICATION & CLUSTERING (Advanced)
# ===================================================================

# Qdrant Enterprise feature - comment out for single-node
# Cluster ID for multi-node deployments
# QDRANT__CLUSTER__ENABLED=false
# QDRANT__CLUSTER__PEER_ADDR=qdrant-peer:6335
# QDRANT__CLUSTER__CONSENSUS__TICK_PERIOD_MS=100

# ===================================================================
# ADVANCED CONFIGURATION
# ===================================================================

# WAL (Write-Ahead Log) settings for durability
# Segment size in bytes - larger = fewer files but slower seeks
# QDRANT__STORAGE__WAL_SEGMENT_SIZE_BYTES=33554432

# Maximum batch operations
# QDRANT__OPTIMIZERS__BATCH_SIZE=100

# Hnsw index configuration
# QDRANT__HNSW_INDEX__M=16
# QDRANT__HNSW_INDEX__EF_CONSTRUCT=200
# QDRANT__HNSW_INDEX__FULL_SCAN_THRESHOLD=10000
# QDRANT__HNSW_INDEX__MAX_INDEXING_THREADS=0

# ===================================================================
# RAILWAY-SPECIFIC RECOMMENDATIONS
# ===================================================================
# - Use managed volumes for /qdrant/storage
# - Monitor metrics via Railway dashboard
# - Set resource limits in Railway service settings (2GB RAM min)
# - Enable API key for all production deployments
# - Configure automatic snapshots for data safety
# - Use the /readyz endpoint for health checks
