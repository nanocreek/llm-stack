[0;34m
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  LLM Stack - Minikube Development      â•‘
â•‘  Setup and Deployment Script           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[0m

[0;34m=== Checking Prerequisites ===[0m

[0;32mâœ“ Docker is installed: Docker version 28.4.0, build d8eb465[0m
[0;32mâœ“ Minikube is installed: v1.36.0[0m
[0;32mâœ“ kubectl is installed: [0m
[0;32mâœ“ Skaffold is installed: v2.16.1[0m

[0;34m=== Starting Minikube ===[0m

[0;32mâœ“ Minikube is already running[0m
[0;32mâœ“ Kubernetes cluster is accessible[0m

[0;34m=== Setting Up Docker Environment ===[0m

[0;32mâœ“ Docker environment configured for Minikube[0m

[0;34m=== Building Docker Images ===[0m

Building images using Skaffold...
Generating tags...
 - llm-stack/react-client -> llm-stack/react-client:f2b4a1a
 - llm-stack/r2r -> llm-stack/r2r:f2b4a1a
 - llm-stack/qdrant -> llm-stack/qdrant:f2b4a1a
 - llm-stack/litellm -> llm-stack/litellm:f2b4a1a-dirty
 - llm-stack/openwebui -> llm-stack/openwebui:f2b4a1a-dirty
Checking cache...
 - llm-stack/react-client: Found Locally
 - llm-stack/r2r: Found Locally
 - llm-stack/qdrant: Found Locally
 - llm-stack/litellm: Not found. Building
 - llm-stack/openwebui: Not found. Building
Starting build...
Found [minikube] context, using local docker daemon.
Building [llm-stack/openwebui]...
Sending build context to Docker daemon  2.048kB
Step 1/5 : FROM ghcr.io/open-webui/open-webui:main
 ---> b74e4892e540
Step 2/5 : WORKDIR /app
 ---> Using cache
 ---> 5c197f9097d3
Step 3/5 : RUN git init /app
 ---> Using cache
 ---> b512af437e57
Step 4/5 : RUN mkdir -p /home/user &&     chown -R 1000:1000 /home/user
 ---> Using cache
 ---> 55dd7023168e
Step 5/5 : EXPOSE 8080
 ---> Using cache
 ---> 90ce9c58486d
Successfully built 90ce9c58486d
Successfully tagged llm-stack/openwebui:f2b4a1a-dirty
Build [llm-stack/openwebui] succeeded
Building [llm-stack/litellm]...
Sending build context to Docker daemon   5.12kB
Step 1/6 : FROM docker.litellm.ai/berriai/litellm:v1.80.8-stable
 ---> 0cef282a0c6d
Step 2/6 : WORKDIR /app
 ---> Using cache
 ---> 30c65a172ab3
Step 3/6 : COPY config.yaml /app/config.yaml
 ---> Using cache
 ---> d37085220868
Step 4/6 : EXPOSE 4000
 ---> Using cache
 ---> 40f1f95a2a62
Step 5/6 : HEALTHCHECK --interval=30s --timeout=5s --start-period=10s --retries=3     CMD curl -f http://localhost:4000/health || exit 1
 ---> Using cache
 ---> 0fbdb1285f7b
Step 6/6 : CMD ["--config", "/app/config/config.yaml", "--host", "0.0.0.0", "--port", "4000"]
 ---> Using cache
 ---> d4a97561684b
Successfully built d4a97561684b
Successfully tagged llm-stack/litellm:f2b4a1a-dirty
Build [llm-stack/litellm] succeeded

[0;32mâœ“ All Docker images built successfully[0m

[0;34m=== Deploying to Kubernetes ===[0m

# Warning: 'bases' is deprecated. Please use 'resources' instead. Run 'kustomize edit fix' to update your Kustomization automatically.
# Warning: 'commonLabels' is deprecated. Please use 'labels' instead. Run 'kustomize edit fix' to update your Kustomization automatically.
# Warning: 'patchesJson6902' is deprecated. Please use 'patches' instead. Run 'kustomize edit fix' to update your Kustomization automatically.
# Warning: 'commonLabels' is deprecated. Please use 'labels' instead. Run 'kustomize edit fix' to update your Kustomization automatically.
# Warning: 'patchesStrategicMerge' is deprecated. Please use 'patches' instead. Run 'kustomize edit fix' to update your Kustomization automatically.
Error from server (NotFound): error when creating "k8s/overlays/dev": namespaces "llm-stack" not found
Error from server (NotFound): error when creating "k8s/overlays/dev": namespaces "llm-stack" not found
Error from server (NotFound): error when creating "k8s/overlays/dev": namespaces "llm-stack" not found
Error from server (NotFound): error when creating "k8s/overlays/dev": namespaces "llm-stack" not found
Error from server (NotFound): error when creating "k8s/overlays/dev": namespaces "llm-stack" not found
Error from server (NotFound): error when creating "k8s/overlays/dev": namespaces "llm-stack" not found
Error from server (NotFound): error when creating "k8s/overlays/dev": namespaces "llm-stack" not found
Error from server (NotFound): error when creating "k8s/overlays/dev": namespaces "llm-stack" not found
Error from server (NotFound): error when creating "k8s/overlays/dev": namespaces "llm-stack" not found
Error from server (NotFound): error when creating "k8s/overlays/dev": namespaces "llm-stack" not found
Error from server (NotFound): error when creating "k8s/overlays/dev": namespaces "llm-stack" not found
Error from server (NotFound): error when creating "k8s/overlays/dev": namespaces "llm-stack" not found
Generating tags...
 - llm-stack/react-client -> llm-stack/react-client:f69fd8d
 - llm-stack/r2r -> llm-stack/r2r:f69fd8d-dirty
 - llm-stack/qdrant -> llm-stack/qdrant:f69fd8d
 - llm-stack/litellm -> llm-stack/litellm:f69fd8d
 - llm-stack/openwebui -> llm-stack/openwebui:f69fd8d-dirty
Checking cache...
 - llm-stack/react-client: Found Locally
 - llm-stack/r2r: Found Locally
 - llm-stack/qdrant: Found Locally
 - llm-stack/litellm: Found Locally
 - llm-stack/openwebui: Found Locally
Tags used in deployment:
 - llm-stack/react-client -> llm-stack/react-client:ea8c2ca084f18d0203b2e3d507747f69b7ee8ae0e2c2d0a3204159a2bb95e0c1
 - llm-stack/r2r -> llm-stack/r2r:37f29e7913405b95855cbe61a6c653f6817af1272b53cc7123e5417053201645
 - llm-stack/qdrant -> llm-stack/qdrant:8e6a3f885f03f4b609f5ae2691e377e60521afed66df0fb3a171b224c1829731
 - llm-stack/litellm -> llm-stack/litellm:5cd15e2cf18e105e46f6c016517c8cc402a7ad0d379464fc5fcdd92d29789d8e
 - llm-stack/openwebui -> llm-stack/openwebui:b40713e02ff272becc1aa9fa88ad65030ed924665521c1ebc568826dcc47a6ff
Starting deploy...
 - namespace/llm-stack created
 - configmap/dev-litellm-config created
 - configmap/dev-postgres-config created
 - secret/dev-litellm-secret-767k7tgcb9 created
 - secret/dev-postgres-secret created
 - service/dev-litellm created
 - service/dev-openwebui created
 - service/dev-postgres created
 - service/dev-qdrant created
 - service/dev-r2r created
 - service/dev-react-client created
 - service/dev-redis created
 - persistentvolumeclaim/dev-postgres-data created
 - persistentvolumeclaim/dev-redis-data created
 - deployment.apps/dev-litellm created
 - deployment.apps/dev-openwebui created
 - deployment.apps/dev-qdrant created
 - deployment.apps/dev-r2r created
 - deployment.apps/dev-react-client created
 - statefulset.apps/dev-postgres created
 - statefulset.apps/dev-redis created
Waiting for deployments to stabilize...
I0117 13:44:31.055489  717389 request.go:752] "Waited before sending request" delay="1.179106061s" reason="client-side throttling, not priority and fairness" verb="GET" URL="https://192.168.58.2:8443/api/v1/namespaces/llm-stack/pods?labelSelector=app%3Dreact-client%2Capp.kubernetes.io%2Fpart-of%3Dllm-stack%2Cenv%3Ddevelopment%2Cmanaged-by%3Dskaffold%2Cskaffold.dev%2Frun-id%3Daf985910-5472-4aef-b31f-9f22f14f27aa"
 - llm-stack:deployment/dev-litellm: waiting for rollout to finish: 0 of 1 updated replicas are available...
 - llm-stack:deployment/dev-openwebui: waiting for rollout to finish: 0 of 1 updated replicas are available...
 - llm-stack:deployment/dev-qdrant: waiting for rollout to finish: 0 of 1 updated replicas are available...
 - llm-stack:deployment/dev-r2r: waiting for rollout to finish: 0 of 1 updated replicas are available...
 - llm-stack:deployment/dev-react-client: waiting for rollout to finish: 0 of 1 updated replicas are available...
 - llm-stack:statefulset/dev-postgres: Waiting for 1 pods to be ready...
 - llm-stack:statefulset/dev-redis: Waiting for 1 pods to be ready...
 - llm-stack:statefulset/dev-redis is ready. [6/7 deployment(s) still pending]
 - llm-stack:deployment/dev-qdrant is ready. [5/7 deployment(s) still pending]
 - llm-stack:statefulset/dev-postgres is ready. [4/7 deployment(s) still pending]
 - llm-stack:deployment/dev-litellm is ready. [3/7 deployment(s) still pending]
 - llm-stack:deployment/dev-openwebui is ready. [2/7 deployment(s) still pending]
Deployments stabilized in 58.29 seconds
Port forwarding service/redis-master in namespace llm-stack, remote port 6379 -> http://127.0.0.1:6379
Port forwarding service/postgres in namespace llm-stack, remote port 5432 -> http://127.0.0.1:5432
Port forwarding deployment/dev-litellm in namespace llm-stack, remote port 4000 -> http://127.0.0.1:4000
Port forwarding deployment/dev-react-client in namespace llm-stack, remote port 3000 -> http://127.0.0.1:3000
Port forwarding deployment/dev-openwebui in namespace llm-stack, remote port 8080 -> http://127.0.0.1:8080
Port forwarding deployment/dev-qdrant in namespace llm-stack, remote port 6333 -> http://127.0.0.1:6333
Port forwarding deployment/dev-r2r in namespace llm-stack, remote port 7272 -> http://127.0.0.1:7272
time="2026-01-17T13:45:24+02:00" level=warning msg="could not map pods to service llm-stack/redis-master/6379: getting service llm-stack/redis-master: client rate limiter Wait returned an error: context canceled" subtask=service/redis-master task=PortForward
time="2026-01-17T13:45:24+02:00" level=warning msg="could not map pods to service llm-stack/postgres/5432: getting service llm-stack/postgres: client rate limiter Wait returned an error: context canceled" subtask=service/postgres task=PortForward
Listing files to watch...
 - llm-stack/react-client

